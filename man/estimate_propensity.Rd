% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/propensity.R
\name{estimate_propensity}
\alias{estimate_propensity}
\title{Fold‐specific propensity score estimation}
\usage{
estimate_propensity(task, fold, learners, control, pb = NULL)
}
\arguments{
\item{task}{An \code{lmtp_task} object created by \code{lmtp_task()}.}

\item{fold}{Integer index of the fold to use as evaluation set.}

\item{learners}{Character; either "rf" (ranger) or "sl" (SuperLearner).}

\item{control}{An \code{lmtp_control()} object; supplies \code{.learners_trt_folds} and \code{.quiet}.}

\item{pb}{Function; optional progress callback called after each timepoint.}
}
\value{
A list with:
\item{prop_scores}{Array (n_valid × T × 2) of estimated propensities on validation set.}
\item{fits}{List of length T of fitted models or weight vectors.}
}
\description{
Estimate time‐varying propensity scores within a single cross‐fit fold,
fitting only on at‐risk subjects.
}
\keyword{internal}
